(function(){var t=[].slice;!function(n,o){var i;return i=function(){function t(t,o){this.options=n.extend({},this.defaults,o),this.$container=n(t),this.$table=n(t).find("table"),this.$context=n(this.options.context),this.init()}return t.prototype.defaults={debug:!1,navSelector:"a[rel=next]",buffer:1e3,loading:null,success:null,error:null,context:o,state:{paused:!1,loading:!1}},t.prototype.init=function(){var t,n;return n=null,t=function(t){return function(){return t.check()}}(this),this.$context.scroll(function(){return n&&(clearTimeout(n),n=null),n=setTimeout(t,250)})},t.prototype._log=function(t){return this.options.debug&&"undefined"!=typeof console&&null!==console?console.log(t):void 0},t.prototype.check=function(){var t,n,o;return n=this.$container.find(this.options.navSelector),0===n.size()?this._log("No more pages to load"):(o=this.$context.scrollTop()+this.$context.height(),t=n.offset().top-o,this.options.state.paused?this._log("Paused"):this.options.state.loading?this._log("Waiting..."):t>this.options.buffer?this._log(t-this.options.buffer+"px remaining..."):this.next())},t.prototype.next=function(){return this.options.state.done?this._log("Loaded all pages"):(this._loading(),n.getScript(this.$container.find(this.options.navSelector).attr("href")).done(function(t){return function(){return t._success()}}(this)).fail(function(t){return function(){return t._error()}}(this)))},t.prototype._loading=function(){return this.options.state.loading=!0,this._log("Loading next page..."),"function"==typeof this.options.loading?this.$container.find(this.options.navSelector).each(this.options.loading):void 0},t.prototype._success=function(){return this.options.state.loading=!1,this._log("New page loaded!"),"function"==typeof this.options.success?this.$container.find(this.options.navSelector).each(this.options.success):void 0},t.prototype._error=function(){return this.options.state.loading=!1,this._log("Error loading new page :("),"function"==typeof this.options.error?this.$container.find(this.options.navSelector).each(this.options.error):void 0},t.prototype.pause=function(){return this.options.state.paused=!0,this._log("Scroll checks paused")},t.prototype.resume=function(){return this.options.state.paused=!1,this._log("Scroll checks resumed"),this.check()},t}(),n.fn.extend({infinitePages:function(){var o,e;return e=arguments[0],o=2<=arguments.length?t.call(arguments,1):[],this.each(function(){var t,s;return t=n(this),s=t.data("infinitepages"),s||t.data("infinitepages",s=new i(this,e)),"string"==typeof e?s[e].apply(s,o):void 0})}})}(window.jQuery,window)}).call(this);